# 配置
# 额外的约定文件
- src/pages/document.ejs: 页面模板文件
- src/global.js：在umi最开始启动时运行的js文件
- src/app.js：作运行时配置的代码
- patchRoutes: 函数，该函数会在umi读取完所有静态路由配置后执行
- dva
- config： 相当于new dva(配置)
- plugins： 相当于dva.use(插件)


- .env: 配置环境变量，这些变量会在umi编译期间发挥作用
- UMI_ENV：umi的环境变量值，可以是任意值，该值会影响到.umirc.js,可以 指定开发模式下的配置文件，但是之后（生产环境）.umirc.js文件会覆盖该文件
- PORT    指定端口号
- MOCK    是否使用模拟数据，默认为开启


# .umirc配置
- umi配置
- 书写在.umirc.js文件中的配置

- plugins：配置umijs的插件
- routes：配置路由（会导致约定式路由失效）
- history：history对象模式（默认是browser）
- outputPath：使用umi build后，打包的目录名称，默认./dist
- base: 相当于之前BrowserRouter中的basename
- publicPath: 指定静态资源所在的目录
- exportStatic: 开启该配置后，会打包成多个静态页面，每个页面对应一个路由，开启多静态页面应用的前提条件是：没有动态路由
# webpack配置

#PureComponent

纯组件，用于避免不必要的渲染(渲染render函数)，从而提高效率
优化：如果一个组件的属性和状态都没有发生改变，重新渲染该组件是没有必要的

PureComponent是一个组件，如果某个组件继承自该组件，则该组件的shouldComponentUpdate会进行优化,
对属性和状态进行浅比较，如果相等则不会重新渲染

**注意**
PureComponent进行的是浅比较
1.为了效率，应该尽量使用PureComponent
2.要求不要改动之前的状态，永远是创建新的状态覆盖之前的状态(Immutable 不可变对象)
3.有一个第三方JS库，immutable.js，它专门用于制作不可变对象
函数组件，使用React.memo函数制作纯组件


# State Hook
- State Hook是一个在函数组件中使用的函数（useState），用于在函数组件中使用状态

useState
函数有一个参数，这个参数的值表示状态的默认值
函数的返回值是一个数组，该数组一定包含两项
第一项：当前状态的值
第二项：改变状态的函数

一个函数组件中可以有多个状态，这种做法非常有利于横向切分关注点。

**注意的细节**
- useState最好写到函数的起始位置，便于阅读
- useState严禁出现在代码块（判断、循环）中
- useState返回的函数（数组的第二项），引用不变（节约内存空间）
- 使用函数改变数据，若数据和之前的数据完全相等（使用Object.is比较），不会导致重新渲染，以达到优化效率的目的。
- 使用函数改变数据，传入的值不会和原来的数据进行合并，而是直接替换。
- 如果要实现强制刷新组件
- 类组件：使用forceUpdate函数
- 函数组件：使用一个空对象的useState
- 如果某些状态之间没有必然的联系，应该分化为不同的状态，而不要合并成一个对象
- 和类组件的状态一样，函数组件中改变状态可能是异步的（在DOM事件中），多个状态变化会合并以提高效率，此时，不能信任之前的状态，而应该使用回调函数的方式改变状态。如果状态变化要使用到之前的状态，尽量传递函数。
